<!DOCTYPE html>
<html lang="en">
  <head>
    <title>  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
           Docs
        </a>
         (87% documented)
      </p>
    
      <div class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </div>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/mipalgu/swift_GURobots">
            <img class="header-icon" src="img/gh.png" alt="GitHub"/>
            View on GitHub
          </a>
        </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="dash-feed://https%3A%2F%2Fmipalgu.github.io%2Fswift_GURobots%2Fdocsets%2F.xml">
            <img class="header-icon" src="img/dash.png" alt="Dash"/>
            Install in Dash
          </a>
        </p>
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html"> Reference</a>
      <img class="carat" src="img/carat.png" alt=""/>
        Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Nao.html">Nao</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/NaoV5.html">NaoV5</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/NaoWBIndexes.html">NaoWBIndexes</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Nao.html#/s:3Nao0A15JointsContainerP">NaoJointsContainer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/NaoJoints.html">NaoJoints</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/NaoHead.html">NaoHead</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/NaoHeadSensors.html">NaoHeadSensors</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/NaoArm.html">NaoArm</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/NaoHandSensors.html">NaoHandSensors</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/NaoLeg.html">NaoLeg</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ManageableNaoV5.html">ManageableNaoV5</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Robot%20Types.html">Robot Types</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/NaoRobot.html">NaoRobot</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Robot%20Types.html#/s:8GURobots18SoccerPlayingRobotP">SoccerPlayingRobot</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/UpdateableRobot.html">UpdateableRobot</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Player%20Data.html">Player Data</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/PlayerNumberContainer.html">PlayerNumberContainer</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Cameras.html">Cameras</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/RobotCamera.html">RobotCamera</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/CamerasContainer.html">CamerasContainer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/BottomCameraContainer.html">BottomCameraContainer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/BottomCameraIndexContainer.html">BottomCameraIndexContainer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TopCameraContainer.html">TopCameraContainer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TopCameraIndexContainer.html">TopCameraIndexContainer</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Joints.html">Joints</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/JointsContainer.html">JointsContainer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/PitchJoint.html">PitchJoint</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/PitchRollJoint.html">PitchRollJoint</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/PitchYawJoint.html">PitchYawJoint</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/YPJoint.html">YPJoint</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/YawJoint.html">YawJoint</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/YawRollJoint.html">YawRollJoint</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Sightings%20%28Vision%29.html">Sightings (Vision)</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SoccerSightingsContainer.html">SoccerSightingsContainer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/BottomCameraSoccerSightingsContainer.html">BottomCameraSoccerSightingsContainer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TopCameraSoccerSightingsContainer.html">TopCameraSoccerSightingsContainer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/SoccerSightings.html">SoccerSightings</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/EllipseSighting.html">EllipseSighting</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/RectangleSighting.html">RectangleSighting</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/HorizonSighting.html">HorizonSighting</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/CornerSighting.html">CornerSighting</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/LineSighting.html">LineSighting</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Locations.html">Locations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SoccerObjectLocationsContainer.html">SoccerObjectLocationsContainer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/SoccerObjectLocations.html">SoccerObjectLocations</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Localisation.html">Localisation</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/FieldPositionContainer.html">FieldPositionContainer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/BallPositionContainer.html">BallPositionContainer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/BallPosition.html">BallPosition</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Orientation.html">Orientation</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Converting%20C%20Types.html">Converting C Types</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/CTypeDelegator.html">CTypeDelegator</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/CTypeWrapper.html">CTypeWrapper</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            
            <h1 id='gurobots' class='heading'>GURobots</h1>

<p><em>Swift convenience wrappers around gurobots</em></p>

<hr>
<h1 id='table-of-contents' class='heading'>Table Of Contents</h1>

<ul>
<li><a href="#quick-start">Quick Start</a></li>
<li><a href="#nao-robots">Nao Robots</a>

<ul>
<li><a href="#reading-from-the-whiteboard">Reading From The Whiteboard</a></li>
<li><a href="#a-manageable-nao">A Manageable Nao</a></li>
<li><a href="#common-functionality">Common Functionality</a></li>
<li><a href="#joints">Joints</a>

<ul>
<li><a href="#manipulating-joints">Manipulating Joints</a></li>
</ul></li>
<li><a href="#kinematics">Kinematics</a></li>
<li><a href="#vision-not-yet-implemented">Vision (Not Yet Implemented)</a></li>
<li><a href="#locations">Locations</a></li>
<li><a href="#field-position">Field Position</a></li>
</ul></li>
</ul>
<h1 id='quick-start' class='heading'>Quick Start</h1>

<p>GURobots gives you the ability to query the state of robots from the whiteboard. This
pretty much combines all the modules that are used for robocup into a single
facade/active record like structure. This is achieved by creating a robot (such as a nao)
object:</p>
<pre class="highlight swift"><code><span class="c1">// Creates a nao that will read from the global whiteboard.</span>
<span class="k">var</span> <span class="nv">nao</span> <span class="o">=</span> <span class="kt">NaoV5</span><span class="p">()</span>
</code></pre>

<p>And then, when new information is required, reading from the whiteboard:</p>
<pre class="highlight swift"><code><span class="n">nao</span><span class="o">.</span><span class="nf">update</span><span class="p">()</span> <span class="c1">// Reads from the whiteboard.</span>
</code></pre>

<p>A set of protocols and protocol extensions are available which provide all of
then functionality of the robots. Some common protocols are: <code><a href="Nao.html#/s:3Nao0A15JointsContainerP">NaoJointsContainer</a></code>,
<code><a href="Protocols/SoccerObjectLocationsContainer.html">SoccerObjectLocationsContainer</a></code>, <code><a href="Protocols/FieldPositionContainer.html">FieldPositionContainer</a></code> and the camera protocols
<code><a href="Protocols/TopCameraContainer.html">TopCameraContainer</a></code> and <code><a href="Protocols/BottomCameraContainer.html">BottomCameraContainer</a></code>.</p>

<p>The robots objects also leverage GUCoordinates to allow for coordinate calculations:</p>
<pre class="highlight swift"><code><span class="c1">// Fetch the ball as a RelativeCoordinate</span>
<span class="k">guard</span> <span class="k">let</span> <span class="nv">ball</span> <span class="o">=</span> <span class="n">nao</span><span class="o">.</span><span class="n">ballSighting</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nf">fatalError</span><span class="p">(</span><span class="s">"The nao cannot see the ball"</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Calculate the field position of the ball.</span>
<span class="k">guard</span> <span class="k">let</span> <span class="nv">ballFieldPosition</span> <span class="o">=</span> <span class="n">nao</span><span class="o">.</span><span class="nf">cartesianCoordinate</span><span class="p">(</span><span class="nv">at</span><span class="p">:</span> <span class="n">ball</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nf">fatalError</span><span class="p">(</span><span class="s">"Only fails if the nao doesn't know where it is on the field"</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// The robots can also create gucoordinate camera pivots and provide convenience</span>
<span class="c1">// functions for converting between image and relative coordinate systems.</span>
<span class="k">let</span> <span class="nv">pixelCoordinate</span> <span class="o">=</span> <span class="kt">PixelCoordinate</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="o">-</span><span class="mi">12</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="mi">46</span><span class="p">,</span> <span class="nv">resWidth</span><span class="p">:</span> <span class="mi">640</span><span class="p">,</span> <span class="nv">resHeight</span><span class="p">:</span> <span class="mi">480</span><span class="p">)</span>
<span class="k">if</span> <span class="n">nao</span><span class="o">.</span><span class="nf">topCameraObjectOnGround</span><span class="p">(</span><span class="n">pixelCoordinate</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">relativeCoordinate</span> <span class="o">=</span> <span class="n">nao</span><span class="o">.</span><span class="nf">topCameraRelativeCoordinate</span><span class="p">(</span><span class="nv">of</span><span class="p">:</span> <span class="n">pixelCoordinate</span><span class="p">)</span>
<span class="p">}</span>
<span class="k">let</span> <span class="nv">clamped</span> <span class="o">=</span> <span class="n">nao</span><span class="o">.</span><span class="nf">topCameraClampedPercentCoordinate</span><span class="p">()</span>
</code></pre>
<h1 id='nao-robots' class='heading'>Nao Robots</h1>
<h2 id='reading-from-the-whiteboard' class='heading'>Reading From The Whiteboard</h2>

<p>The <code><a href="Classes/NaoV5.html">NaoV5</a></code> struct is the struct to use when creating behaviours. This struct allows you
to query the state of all the modules within the MiPal infrastructure which post to the
whiteboard and are related to the nao robot. The constructor takes a whiteboard and the
indexes to use to query the messages related to the nao in the whiteboard. By default,
if you do not provide these parameters, the default global whiteboard and appropriate
indexes are used. This means that by default, creating a nao will use the global
whiteboard to read its values:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">nao</span> <span class="o">=</span> <span class="kt">NaoV5</span><span class="p">()</span>
</code></pre>

<p>Alternatively, for example when custom whiteboard are used, you can provide these
values:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">nao</span> <span class="o">=</span> <span class="kt">NaoV5</span><span class="p">(</span>
    <span class="nv">wb</span><span class="p">:</span> <span class="kt">Whiteboard</span><span class="p">(</span><span class="nv">wbd</span><span class="p">:</span> <span class="nf">gsw_new_whiteboard</span><span class="p">(</span><span class="s">"my_custom_whiteboard"</span><span class="p">)),</span>
    <span class="nv">indexes</span><span class="p">:</span> <span class="kt">NaoWBIndexes</span><span class="p">(</span>
        <span class="nv">torsoSensors</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nv">topParticles</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nv">handSensors</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="nv">headSensors</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="nv">legSensors</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="nv">ballLocation</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
        <span class="nv">leftGoalPostLocation</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
        <span class="nv">rightGoalPostLocation</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
        <span class="nv">goalLocation</span><span class="p">:</span> <span class="mi">8</span>
    <span class="p">)</span>
<span class="p">)</span>
</code></pre>

<p>One you have a nao object, you may routinely update the nao with the latest values from
the whiteboard. Note that this means that you must manually trigger a read from the
whiteboard, by default, the nao will keep the previous read values until a whiteboard
read happens. You can read from the whiteboard using the update function:</p>
<pre class="highlight plaintext"><code>var nao = NaoV5() // Reads from the whiteboard automatically when it is created.
nao.update() // Take a second reading from the whiteboard.
</code></pre>
<h2 id='a-manageable-nao' class='heading'>A Manageable Nao</h2>

<p>While the <code><a href="Classes/NaoV5.html">NaoV5</a></code> object gives you a read-only interface that communicates with the
whiteboard, sometimes a fully manual approach is required. The <code><a href="Structs/ManageableNaoV5.html">ManageableNaoV5</a></code>
struct is used for this purpose. If you are creating a simulator, or perhaps a vision
module, then this is the struct you should use.</p>

<p>The <code><a href="Structs/ManageableNaoV5.html">ManageableNaoV5</a></code> struct does not read from a whiteboard.
Note that the <code><a href="Structs/ManageableNaoV5.html">ManageableNaoV5</a></code> provides the same
set of functionality as <code><a href="Classes/NaoV5.html">NaoV5</a></code> as it conforms to the same set of protocols; however,
where the <code><a href="Classes/NaoV5.html">NaoV5</a></code> object would only allow you to influence the values within the object &mdash;
thus the result of the functions that it provides &mdash; by reading the whiteboard,
a <code><a href="Structs/ManageableNaoV5.html">ManageableNaoV5</a></code> object allows you to directly write to these variables and thus
directly influence the result of certain operations. Basically, the <code><a href="Structs/ManageableNaoV5.html">ManageableNaoV5</a></code>
type gives you full control of the results of the operations that it can perform whereas the
<code><a href="Classes/NaoV5.html">NaoV5</a></code> object was only limited to results based on the values from the whiteboard.</p>

<p>Because the <code><a href="Structs/ManageableNaoV5.html">ManageableNaoV5</a></code> struct does not read from the whiteboard, the constructor
may take some values:</p>
<pre class="highlight swift"><code><span class="c1">// Setting the head pitch and yaw.</span>
<span class="k">var</span> <span class="nv">nao</span> <span class="o">=</span> <span class="kt">ManageableNao</span><span class="p">(</span>
        <span class="nv">joints</span><span class="p">:</span> <span class="kt">NaoJoints</span><span class="p">(</span>
            <span class="nv">head</span><span class="p">:</span> <span class="kt">NaoHead</span><span class="p">(</span><span class="nv">neck</span><span class="p">:</span> <span class="kt">PitchYawJoint</span><span class="p">(</span><span class="nv">pitch</span><span class="p">:</span> <span class="o">.</span><span class="nf">degrees</span><span class="p">(</span><span class="mf">5.7</span><span class="p">),</span> <span class="nv">yaw</span><span class="p">:</span> <span class="o">.</span><span class="nf">degrees</span><span class="p">(</span><span class="o">-</span><span class="mf">12.4</span><span class="p">)))</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre>

<p>Once the nao has been created, you may overwrite these values:</p>
<pre class="highlight swift"><code><span class="c1">// Changing the head pitch.</span>
<span class="n">nao</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">neck</span><span class="o">.</span><span class="n">pitch</span> <span class="o">=</span> <span class="o">.</span><span class="nf">degrees</span><span class="p">(</span><span class="o">-</span><span class="mf">3.2</span><span class="p">)</span>
</code></pre>
<h2 id='common-functionality' class='heading'>Common Functionality</h2>

<p>The <code><a href="Classes/NaoV5.html">NaoV5</a></code> and <code><a href="Structs/ManageableNaoV5.html">ManageableNaoV5</a></code> structs share a lot of common functionality. This is
provided through protocol and protocol extensions. Many of the functionality that these
protocols provide is built from properties which the nao structs define. For the <code><a href="Classes/NaoV5.html">NaoV5</a></code> these
properties are automatically created from the values read from the whiteboard. For the
<code><a href="Structs/ManageableNaoV5.html">ManageableNaoV5</a></code>, again, these properties have to be provided manually; however, these
values contain common sense defaults and may be omitted in different situations.
The following is a list of some of the common functionality that the nao structs provide:</p>
<h3 id='joints' class='heading'>Joints</h3>

<hr>

<p>The nao structs contain a <code>joints</code> property which is of the type <code><a href="Structs/NaoJoints.html">NaoJoints</a></code>. The
<code><a href="Structs/NaoJoints.html">NaoJoints</a></code> struct contains information for all the joints that make up the nao. This includes
the pitch, yaw and roll of the joints, as well (not yet implemented) as temperature readings
from the sensors for each of the joints.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">neck</span> <span class="o">=</span> <span class="n">nao</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">neck</span> <span class="c1">// PitchYawJoint</span>
</code></pre>
<h4 id='manipulating-joints' class='heading'>Manipulating Joints</h4>

<p>For the <code><a href="Structs/ManageableNaoV5.html">ManageableNaoV5</a></code> struct, it can be difficult to set all the joints to place the robot
into specific positions. To make this easier, the <code><a href="Structs/ManageableNaoV5.html">ManageableNaoV5</a></code>  stryct provides
convenience functions for common positions:</p>
<pre class="highlight swift"><code><span class="c1">// Sets the arm and leg joints.</span>
<span class="k">let</span> <span class="nv">nao</span> <span class="o">=</span> <span class="kt">ManageableNaoV5</span><span class="o">.</span><span class="nf">standing</span><span class="p">()</span>
<span class="k">let</span> <span class="nv">nao</span> <span class="o">=</span> <span class="kt">ManageableNaoV5</span><span class="o">.</span><span class="nf">kneeling</span><span class="p">()</span>

<span class="c1">// Can still set all the other fields.</span>
<span class="k">let</span> <span class="nv">nao</span> <span class="o">=</span> <span class="kt">ManagealbeNaoV5</span><span class="o">.</span><span class="nf">standing</span><span class="p">(</span>
    <span class="nv">head</span><span class="p">:</span> <span class="kt">NaoHead</span><span class="p">(</span><span class="nv">neck</span><span class="p">:</span> <span class="kt">PitchYawJoint</span><span class="p">(</span><span class="nv">pitch</span><span class="p">:</span> <span class="o">.</span><span class="nf">degrees</span><span class="p">(</span><span class="mf">1.5</span><span class="p">),</span> <span class="nv">yaw</span><span class="p">:</span> <span class="o">.</span><span class="nf">degrees</span><span class="p">(</span><span class="o">-</span><span class="mf">2.3</span><span class="p">))),</span>
    <span class="nv">soccerObjectLocations</span><span class="p">:</span> <span class="kt">SoccerObjectLocations</span><span class="p">(</span><span class="nv">ball</span><span class="p">:</span> <span class="kt">RelativeCoordinate</span><span class="p">(</span><span class="nv">direction</span><span class="p">:</span> <span class="o">.</span><span class="nf">degrees</span><span class="p">(</span> <span class="o">-</span><span class="mi">36</span><span class="p">),</span> <span class="nv">distance</span><span class="p">:</span> <span class="o">.</span><span class="nf">centimetres</span><span class="p">(</span><span class="mi">80</span><span class="p">))),</span>
    <span class="nv">fieldPosition</span><span class="p">:</span> <span class="kt">FieldCoordinate</span><span class="p">(</span><span class="nv">position</span><span class="p">:</span> <span class="kt">CartesianCoordinate</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="o">-</span><span class="mi">23</span><span class="p">),</span>
    <span class="nv">heading</span><span class="p">:</span> <span class="o">.</span><span class="nf">degrees</span><span class="p">(</span><span class="mi">80</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1">// You can also do this after the nao has been created</span>
<span class="k">var</span> <span class="nv">nao</span> <span class="o">=</span> <span class="kt">ManageableNaoV5</span><span class="p">()</span>
<span class="n">nao</span><span class="o">.</span><span class="nf">stand</span><span class="p">()</span>
<span class="n">nao</span><span class="o">.</span><span class="nf">kneel</span><span class="p">()</span>

<span class="c1">// Immutable Variants</span>
<span class="k">let</span> <span class="nv">newNao</span> <span class="o">=</span> <span class="n">nao</span><span class="o">.</span><span class="nf">standing</span><span class="p">()</span>
<span class="k">let</span> <span class="nv">newNao</span> <span class="o">=</span> <span class="n">nao</span><span class="o">.</span><span class="nf">kneeling</span><span class="p">()</span>
</code></pre>
<h3 id='kinematics' class='heading'>Kinematics</h3>

<hr>

<p>Because the nao structs contain the current position of all the joints, kinematics calculations
are possible. Importantly, this makes it possible to provide convenience functions for
interfacing with <code>gucoordinates</code>. The <code>gucoordinates</code> library uses <code>CameraPivot</code>
and <code>Camera</code> objects to specify the orientation and location of cameras with respect to
the ground. Because the nao structs can perform a kinematics chain, the
<code>CameraPivot</code> and <code>Camera</code> objects for the robot can automatically be created. This
makes, for example, converting a sighting from vision &mdash; which is posted in centered
pixel coordinates &mdash; easily convertable to relative coordinates &mdash; which is used by
the Kalman Filter &mdash; for each of the top and bottom cameras:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">mySighting</span> <span class="o">=</span> <span class="kt">PixelCoordinate</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="o">-</span><span class="mi">242</span><span class="p">,</span> <span class="nv">resWidth</span><span class="p">:</span> <span class="mi">1920</span><span class="p">,</span> <span class="nv">resHeight</span><span class="p">:</span> <span class="mi">1080</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">relativeCoordinate</span> <span class="o">=</span> <span class="n">nao</span><span class="o">.</span><span class="nf">topCameraRelativeCoordinate</span><span class="p">(</span><span class="nv">of</span><span class="p">:</span> <span class="n">mySighting</span><span class="p">)</span>

<span class="c1">// Or perhaps some safety checks first:</span>
<span class="k">guard</span> <span class="n">nao</span><span class="o">.</span><span class="nf">topCameraObjectOnGround</span><span class="p">(</span><span class="nv">object</span><span class="p">:</span> <span class="n">mySighting</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nf">fatalError</span><span class="p">(</span><span class="s">"The sighting was for an object that is not on the ground."</span><span class="p">)</span>
<span class="p">}</span>
<span class="k">let</span> <span class="nv">relativeCoordinate</span> <span class="o">=</span> <span class="n">nao</span><span class="o">.</span><span class="nf">topCameraRelativeCoordinate</span><span class="p">(</span><span class="nv">of</span><span class="p">:</span> <span class="n">mySighting</span><span class="p">)</span>
</code></pre>
<h3 id='vision-not-yet-implemented' class='heading'>Vision (Not Yet Implemented)</h3>

<hr>

<p>The nao structs contain a <code>topCameraSightings</code> property and a
<code>bottomCameraSightings</code> property which contain the sightings that is reported from
vision. Each of these properties is a <code><a href="Structs/SoccerSightings.html">SoccerSightings</a></code> struct. A <code><a href="Structs/SoccerSightings.html">SoccerSightings</a></code>
struct provides information for the sightings for each of the objects on a soccer field in
cenetered pixel coordinates. Because GURobots interfaces with <code>gucoordinates</code> it is
possible to fetch these sightings using the different coordinate systems:</p>
<pre class="highlight swift"><code><span class="c1">// In centered pixel coordinates.</span>
<span class="k">guard</span> <span class="k">let</span> <span class="nv">ballSighting</span> <span class="o">=</span> <span class="n">nao</span><span class="o">.</span><span class="n">bottomCameraBallSighting</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nf">fatalError</span><span class="p">(</span><span class="s">"Cannot see ball."</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">ballSighting</span> <span class="c1">// PixelCoordinate</span>
<span class="k">let</span> <span class="nv">cameraCoordinate</span> <span class="o">=</span> <span class="n">ballSightings</span><span class="o">.</span><span class="n">cameraCoordinate</span> <span class="c1">// CameraCoordinate</span>
</code></pre>
<h3 id='locations' class='heading'>Locations</h3>

<hr>

<p>Each of the nao structs contain a <code>soccerObjectLocations</code> property. This property
contains information on the relative locations of soccer field objects &mdash; such as the
ball and goals &mdash; in relation to the robot. Each of the nao structs provide convenience
functions for accessing these locations:</p>
<pre class="highlight swift"><code><span class="c1">// Where is the ball in relation to the robot?</span>
<span class="k">guard</span> <span class="k">let</span> <span class="nv">ballLocation</span> <span class="o">=</span> <span class="n">nao</span><span class="o">.</span><span class="n">ballLocation</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nf">fatalError</span><span class="p">(</span><span class="s">"We don't know where the ball is."</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">ballLocation</span> <span class="c1">// RelativeCoordinate(direction: .degrees(-12), distance: .millimetres(3000))</span>
</code></pre>
<h3 id='field-position' class='heading'>Field Position</h3>

<hr>

<p>Each of the nao structs contain a <code>fieldPosition</code> property that may be nil. This property
is a <code>FieldCoordinate</code> from <code>gucoordinates</code> describing the current position of the robot
on the soccer field. Having the position of the robot on the soccer field is advantageous
as it allows all the sightings and locations mentioned in the previous sections to be
extrapolated into the field coordinate system space:</p>
<pre class="highlight swift"><code><span class="k">guard</span> <span class="k">let</span> <span class="nv">ballLocation</span> <span class="o">=</span> <span class="n">nao</span><span class="o">.</span><span class="n">ballLocation</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nf">fatalError</span><span class="p">(</span><span class="s">"We don't know where the ball is."</span><span class="p">)</span>
<span class="p">}</span>
<span class="k">guard</span> <span class="k">let</span> <span class="nv">ballFieldPosition</span> <span class="o">=</span> <span class="n">nao</span><span class="o">.</span><span class="nf">cartesianCoordinate</span><span class="p">(</span><span class="nv">at</span><span class="p">:</span> <span class="n">ballLocation</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nf">fatalError</span><span class="p">(</span><span class="s">"We don't knoe where we are on the field."</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">ballFieldPosition</span> <span class="c1">// CartesianCoordinate</span>
</code></pre>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2021 <a class="link" href="" target="_blank" rel="external noopener">Callum McColl</a>. All rights reserved. (Last updated: 2021-12-24)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ♪♫ v0.14.1</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
    </section>
  </body>
</html>
